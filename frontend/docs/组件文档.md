# EduChain 前端组件文档

## 文档信息

| 项目 | 内容 |
|------|------|
| 项目名称 | EduChain 前端组件库 |
| 组件数量 | 50+ |
| UI框架 | Ant Design 6.0 |

---

## 一、组件概览

### 1.1 组件分类

| 分类 | 目录 | 组件数 | 说明 |
|------|------|--------|------|
| 布局组件 | layout/ | 5 | 页面布局相关 |
| 通用组件 | common/ | 10 | 可复用基础组件 |
| 知识组件 | knowledge/ | 18 | 知识内容相关 |
| 区块链组件 | blockchain/ | 6 | 区块链功能相关 |
| 搜索组件 | search/ | 4 | 搜索功能相关 |
| 推荐组件 | recommendation/ | 4 | 推荐功能相关 |
| 管理组件 | admin/ | 3 | 后台管理相关 |
| UI组件 | ui/ | 2 | 基础UI组件 |

---

## 二、布局组件 (Layout)

### 2.1 Layout

主布局组件，包含Header、Content、Footer。

```typescript
// 使用方式
import Layout from '@/components/layout/Layout';

<Layout>
  <Outlet />
</Layout>
```

**组件结构**：
```
Layout
├── Header          # 顶部导航
├── Content         # 主内容区
│   └── Outlet     # 路由出口
└── Footer          # 底部信息
```

### 2.2 AdminLayout

管理后台布局组件。

```typescript
import AdminLayout from '@/components/layout/AdminLayout';

<AdminLayout>
  <Outlet />
</AdminLayout>
```

**组件结构**：
```
AdminLayout
├── AdminHeader     # 管理后台顶部
├── AdminSidebar    # 侧边导航菜单
└── Content         # 主内容区
```

### 2.3 Header

顶部导航组件。

**功能**：
- Logo和品牌名称
- 主导航菜单
- 搜索框
- 用户菜单
- 主题切换

```typescript
import Header from '@/components/layout/Header';

<Header />
```

### 2.4 Footer

底部信息组件。

**功能**：
- 版权信息
- 快速链接
- 社交媒体链接
- 法律条款链接

### 2.5 AdminSidebar

管理后台侧边栏。

**菜单项**：
- 仪表盘
- 用户管理
- 内容管理
- 分类管理
- 系统监控
- 系统日志

---

## 三、通用组件 (Common)

### 3.1 Loading

加载状态组件。

```typescript
import { Loading } from '@/components/common';

// 全屏加载
<Loading fullScreen />

// 局部加载
<Loading size="large" tip="加载中..." />
```

**Props**：
| 属性 | 类型 | 默认值 | 说明 |
|------|------|--------|------|
| fullScreen | boolean | false | 是否全屏 |
| size | 'small' \| 'default' \| 'large' | 'default' | 大小 |
| tip | string | - | 提示文字 |

### 3.2 ErrorBoundary

错误边界组件，捕获子组件错误。

```typescript
import { ErrorBoundary } from '@/components/common';

<ErrorBoundary fallback={<ErrorDisplay />}>
  <App />
</ErrorBoundary>
```

### 3.3 ErrorDisplay

错误展示组件。

```typescript
import { ErrorDisplay } from '@/components/common';

<ErrorDisplay
  title="出错了"
  message="页面加载失败"
  onRetry={() => window.location.reload()}
/>
```

### 3.4 ProtectedRoute

路由守卫组件。

```typescript
import { ProtectedRoute } from '@/components/common';

// 需要登录
<ProtectedRoute>
  <ProfilePage />
</ProtectedRoute>

// 需要管理员权限
<ProtectedRoute roles={['ADMIN']}>
  <AdminPage />
</ProtectedRoute>
```

**Props**：
| 属性 | 类型 | 默认值 | 说明 |
|------|------|--------|------|
| children | ReactNode | - | 子组件 |
| roles | ('ADMIN' \| 'LEARNER')[] | - | 允许的角色 |

### 3.5 ThemeToggle

主题切换组件。

```typescript
import { ThemeToggle } from '@/components/common';

<ThemeToggle />
```

### 3.6 PermissionWrapper

权限包装组件。

```typescript
import { PermissionWrapper } from '@/components/common';

<PermissionWrapper permission="admin:users:edit">
  <EditButton />
</PermissionWrapper>
```

### 3.7 ScrollToTop

滚动到顶部组件。

```typescript
import { ScrollToTop } from '@/components/common';

<ScrollToTop />
```

### 3.8 EnvironmentIndicator

环境指示器（开发/测试环境显示）。

```typescript
import { EnvironmentIndicator } from '@/components/common';

<EnvironmentIndicator />
```

---

## 四、知识组件 (Knowledge)

### 4.1 KnowledgeCard

知识内容卡片组件。

```typescript
import { KnowledgeCard } from '@/components/knowledge';

<KnowledgeCard
  item={knowledgeItem}
  onClick={() => navigate(`/knowledge/${item.shareCode}`)}
  showStats={true}
/>
```

**Props**：
| 属性 | 类型 | 默认值 | 说明 |
|------|------|--------|------|
| item | KnowledgeItem | - | 知识数据 |
| onClick | () => void | - | 点击回调 |
| showStats | boolean | true | 显示统计 |

### 4.2 KnowledgeFilter

知识筛选组件。

```typescript
import { KnowledgeFilter } from '@/components/knowledge';

<KnowledgeFilter
  categories={categories}
  selectedCategory={categoryId}
  onCategoryChange={setCategoryId}
  selectedType={type}
  onTypeChange={setType}
/>
```

### 4.3 CommentList

评论列表组件。

```typescript
import { CommentList } from '@/components/knowledge';

<CommentList
  knowledgeId={id}
  comments={comments}
  onSubmit={handleSubmitComment}
  onDelete={handleDeleteComment}
/>
```

### 4.4 CommentItem

单条评论组件。

```typescript
import { CommentItem } from '@/components/knowledge';

<CommentItem
  comment={comment}
  onReply={handleReply}
  onDelete={handleDelete}
/>
```

### 4.5 InteractionButtons

互动按钮组件（点赞、收藏、分享）。

```typescript
import { InteractionButtons } from '@/components/knowledge';

<InteractionButtons
  knowledgeId={id}
  stats={stats}
  userLiked={userLiked}
  userFavorited={userFavorited}
  onLike={handleLike}
  onFavorite={handleFavorite}
  onShare={handleShare}
/>
```

### 4.6 CategorySelector

分类选择器组件。

```typescript
import { CategorySelector } from '@/components/knowledge';

<CategorySelector
  value={categoryId}
  onChange={setCategoryId}
  categories={categories}
/>
```

### 4.7 CategoryTree

分类树组件。

```typescript
import { CategoryTree } from '@/components/knowledge';

<CategoryTree
  data={categories}
  selectedKey={selectedId}
  onSelect={handleSelect}
/>
```

### 4.8 TagSelector

标签选择器组件。

```typescript
import { TagSelector } from '@/components/knowledge';

<TagSelector
  value={tags}
  onChange={setTags}
  suggestions={tagSuggestions}
/>
```

### 4.9 TagCloud

标签云组件。

```typescript
import { TagCloud } from '@/components/knowledge';

<TagCloud
  tags={hotTags}
  onTagClick={handleTagClick}
/>
```

### 4.10 RichTextEditor

富文本编辑器组件。

```typescript
import { RichTextEditor } from '@/components/knowledge';

<RichTextEditor
  value={content}
  onChange={setContent}
  placeholder="请输入内容..."
/>
```

### 4.11 MediaUpload

媒体上传组件。

```typescript
import { MediaUpload } from '@/components/knowledge';

<MediaUpload
  value={mediaUrls}
  onChange={setMediaUrls}
  maxCount={9}
  accept="image/*,video/*"
/>
```

### 4.12 FollowButton

关注按钮组件。

```typescript
import { FollowButton } from '@/components/knowledge';

<FollowButton
  userId={userId}
  isFollowing={isFollowing}
  onFollow={handleFollow}
/>
```

### 4.13 FollowList

关注/粉丝列表组件。

```typescript
import { FollowList } from '@/components/knowledge';

<FollowList
  type="following"
  userId={userId}
  onUserClick={handleUserClick}
/>
```

### 4.14 NotificationCenter

通知中心组件。

```typescript
import { NotificationCenter } from '@/components/knowledge';

<NotificationCenter
  notifications={notifications}
  onRead={handleRead}
  onReadAll={handleReadAll}
/>
```

### 4.15 NotificationDropdown

通知下拉组件。

```typescript
import { NotificationDropdown } from '@/components/knowledge';

<NotificationDropdown />
```

### 4.16 ActivityTimeline

活动时间线组件。

```typescript
import { ActivityTimeline } from '@/components/knowledge';

<ActivityTimeline
  activities={activities}
  loading={loading}
/>
```

---


## 五、区块链组件 (Blockchain)

### 5.1 BlockchainOverview

区块链概览组件。

```typescript
import { BlockchainOverview } from '@/components/blockchain';

<BlockchainOverview
  chainInfo={chainInfo}
  stats={stats}
/>
```

**展示内容**：
- 区块链长度
- 总交易数
- 最新区块哈希
- 链有效性状态

### 5.2 BlockList

区块列表组件。

```typescript
import { BlockList } from '@/components/blockchain';

<BlockList
  blocks={blocks}
  loading={loading}
  onBlockClick={handleBlockClick}
/>
```

### 5.3 BlockchainCertInfo

区块链存证信息组件。

```typescript
import { BlockchainCertInfo } from '@/components/blockchain';

<BlockchainCertInfo
  knowledgeId={id}
  contentHash={hash}
  blockIndex={blockIndex}
  timestamp={timestamp}
/>
```

### 5.4 BlockchainSearch

区块链搜索组件。

```typescript
import { BlockchainSearch } from '@/components/blockchain';

<BlockchainSearch
  onSearch={handleSearch}
  placeholder="搜索区块、交易..."
/>
```

### 5.5 CertificationProgress

存证进度组件。

```typescript
import { CertificationProgress } from '@/components/blockchain';

<CertificationProgress
  status="confirmed"
  steps={[
    { title: '提交存证', status: 'finish' },
    { title: '计算哈希', status: 'finish' },
    { title: '写入区块', status: 'process' },
    { title: '存证完成', status: 'wait' }
  ]}
/>
```

---

## 六、搜索组件 (Search)

### 6.1 SearchInput

搜索输入组件。

```typescript
import { SearchInput } from '@/components/search';

<SearchInput
  value={keyword}
  onChange={setKeyword}
  onSearch={handleSearch}
  placeholder="搜索知识内容..."
  suggestions={suggestions}
/>
```

**Props**：
| 属性 | 类型 | 默认值 | 说明 |
|------|------|--------|------|
| value | string | - | 搜索关键词 |
| onChange | (value: string) => void | - | 值变化回调 |
| onSearch | (value: string) => void | - | 搜索回调 |
| placeholder | string | '搜索...' | 占位文字 |
| suggestions | string[] | - | 搜索建议 |

### 6.2 SearchFilters

搜索筛选组件。

```typescript
import { SearchFilters } from '@/components/search';

<SearchFilters
  filters={filters}
  onChange={setFilters}
  categories={categories}
/>
```

**筛选项**：
- 分类筛选
- 内容类型筛选
- 时间范围筛选
- 排序方式

### 6.3 SearchResults

搜索结果组件。

```typescript
import { SearchResults } from '@/components/search';

<SearchResults
  results={results}
  loading={loading}
  keyword={keyword}
  onItemClick={handleItemClick}
/>
```

---

## 七、推荐组件 (Recommendation)

### 7.1 RecommendationList

推荐列表组件。

```typescript
import { RecommendationList } from '@/components/recommendation';

<RecommendationList
  title="热门推荐"
  showTabs={true}
  defaultTab="trending"
  limit={10}
/>
```

**Props**：
| 属性 | 类型 | 默认值 | 说明 |
|------|------|--------|------|
| title | string | - | 标题 |
| showTabs | boolean | true | 显示标签页 |
| defaultTab | string | 'trending' | 默认标签 |
| limit | number | 10 | 显示数量 |
| compact | boolean | false | 紧凑模式 |

### 7.2 RecommendationCard

推荐卡片组件。

```typescript
import { RecommendationCard } from '@/components/recommendation';

<RecommendationCard
  item={item}
  onClick={handleClick}
/>
```

### 7.3 SimilarContent

相似内容组件。

```typescript
import { SimilarContent } from '@/components/recommendation';

<SimilarContent
  knowledgeId={id}
  limit={5}
/>
```

---

## 八、管理组件 (Admin)

### 8.1 AdminHeader

管理后台头部组件。

```typescript
import { AdminHeader } from '@/components/admin';

<AdminHeader
  user={user}
  onLogout={handleLogout}
/>
```

### 8.2 AdminSidebar

管理后台侧边栏组件。

```typescript
import { AdminSidebar } from '@/components/admin';

<AdminSidebar
  collapsed={collapsed}
  onCollapse={setCollapsed}
  selectedKey={selectedKey}
/>
```

**菜单配置**：
```typescript
const menuItems = [
  { key: 'dashboard', icon: <DashboardOutlined />, label: '仪表盘', path: '/admin' },
  { key: 'users', icon: <UserOutlined />, label: '用户管理', path: '/admin/users' },
  { key: 'knowledge', icon: <FileTextOutlined />, label: '内容管理', path: '/admin/knowledge' },
  { key: 'categories', icon: <AppstoreOutlined />, label: '分类管理', path: '/admin/categories' },
  { key: 'statistics', icon: <BarChartOutlined />, label: '系统监控', path: '/admin/statistics' },
  { key: 'logs', icon: <FileSearchOutlined />, label: '系统日志', path: '/admin/logs' },
];
```

---

## 九、UI组件 (UI)

### 9.1 Button

自定义按钮组件。

```typescript
import { Button } from '@/components/ui/button';

<Button variant="primary" size="large">
  点击按钮
</Button>
```

### 9.2 Alert

提示组件。

```typescript
import { Alert } from '@/components/ui/alert';

<Alert type="success" message="操作成功" />
```

---

## 十、组件开发规范

### 10.1 命名规范

- 组件文件：PascalCase（如 `KnowledgeCard.tsx`）
- 样式文件：与组件同名（如 `KnowledgeCard.css` 或 `KnowledgeCard.module.css`）
- 导出文件：`index.ts`

### 10.2 组件结构

```typescript
// 组件模板
import React from 'react';
import type { FC } from 'react';
import './ComponentName.css';

interface ComponentNameProps {
  // Props定义
}

const ComponentName: FC<ComponentNameProps> = (props) => {
  // 组件逻辑
  
  return (
    <div className="component-name">
      {/* JSX */}
    </div>
  );
};

export default ComponentName;
```

### 10.3 Props规范

- 使用TypeScript接口定义Props
- 必填属性不加`?`
- 可选属性加`?`
- 提供默认值

### 10.4 样式规范

- 使用CSS Modules或普通CSS
- 类名使用kebab-case
- 避免使用内联样式
- 支持主题切换

---

**文档结束**
