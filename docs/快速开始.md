# EduChain 快速开始指南

## 1. 环境准备

### 1.1 必需软件

| 软件 | 版本要求 | 下载地址 |
|------|----------|----------|
| JDK | 21+ | [Oracle JDK](https://www.oracle.com/java/technologies/downloads/) |
| Node.js | 18+ | [Node.js](https://nodejs.org/) |
| Python | 3.9+ | [Python](https://www.python.org/) |
| MySQL | 8.0+ | [MySQL](https://dev.mysql.com/downloads/) |
| Redis | 7.0+ | [Redis](https://redis.io/download/) |
| Maven | 3.9+ | [Maven](https://maven.apache.org/download.cgi) |
| Git | 2.x | [Git](https://git-scm.com/) |

### 1.2 验证安装

```bash
# 验证 Java
java -version
# 输出: openjdk version "21.x.x"

# 验证 Node.js
node -v
# 输出: v18.x.x

# 验证 Python
python --version
# 输出: Python 3.9.x

# 验证 Maven
mvn -v
# 输出: Apache Maven 3.9.x

# 验证 MySQL
mysql --version
# 输出: mysql Ver 8.0.x

# 验证 Redis
redis-server --version
# 输出: Redis server v=7.x.x
```

## 2. 获取代码

### 2.1 克隆仓库

```bash
git clone https://github.com/ozemyn/EduChain.git
cd EduChain
```

### 2.2 项目结构

```
EduChain/
├── src/                    # 后端源码
├── frontend/               # 前端源码
├── blockchain-service/     # 区块链服务
├── db/                     # 数据库脚本
├── docs/                   # 项目文档
├── pom.xml                 # Maven配置
└── README.md               # 项目说明
```

## 3. 数据库配置

### 3.1 启动 MySQL

```bash
# macOS
brew services start mysql

# Linux
sudo systemctl start mysql

# Windows
net start mysql
```

### 3.2 创建数据库

```bash
# 登录 MySQL
mysql -u root -p

# 执行以下 SQL
CREATE DATABASE educhain_db CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
CREATE USER 'educhain'@'localhost' IDENTIFIED BY 'educhain123';
GRANT ALL PRIVILEGES ON educhain_db.* TO 'educhain'@'localhost';
FLUSH PRIVILEGES;
EXIT;
```

### 3.3 导入数据表

```bash
mysql -u educhain -p educhain_db < db/database_schema.sql
```

## 4. Redis 配置

### 4.1 启动 Redis

```bash
# macOS
brew services start redis

# Linux
sudo systemctl start redis

# Windows
redis-server
```

### 4.2 验证连接

```bash
redis-cli ping
# 输出: PONG
```

## 5. 后端服务

### 5.1 配置文件

编辑 `src/main/resources/application.yml`:

```yaml
spring:
  datasource:
    url: jdbc:mysql://localhost:3306/educhain_db?useSSL=false&serverTimezone=Asia/Shanghai
    username: educhain
    password: educhain123
  
  data:
    redis:
      host: localhost
      port: 6379

jwt:
  secret: educhain-jwt-secret-key-2024-very-long-and-secure
  expiration: 86400000
```

### 5.2 构建项目

```bash
# 在项目根目录执行
mvn clean install -DskipTests
```

### 5.3 启动服务

```bash
# 开发模式
mvn spring-boot:run -Dspring-boot.run.profiles=dev

# 或者运行 JAR
java -jar target/EduChain-0.0.1-SNAPSHOT.jar
```

### 5.4 验证启动

```bash
# 检查健康状态
curl http://localhost:8080/api/actuator/health

# 预期输出
{"status":"UP"}
```

访问 Swagger 文档: http://localhost:8080/api/swagger-ui.html

## 6. 前端应用

### 6.1 安装依赖

```bash
cd frontend
npm install
```

### 6.2 配置环境

编辑 `frontend/.env.development`:

```env
VITE_API_BASE_URL=http://localhost:8080/api
VITE_MOCK_ENABLED=false
```

### 6.3 启动开发服务器

```bash
npm run dev
```

### 6.4 访问应用

打开浏览器访问: http://localhost:5173

## 7. 区块链服务

### 7.1 安装依赖

```bash
cd blockchain-service
pip install -r requirements.txt
```

### 7.2 启动服务

```bash
python main.py
```

### 7.3 验证启动

```bash
curl http://localhost:8000/api/blockchain/stats

# 预期输出
{"total_blocks":1,"total_transactions":0,...}
```

## 8. 完整启动流程

### 8.1 一键启动脚本 (macOS/Linux)

创建 `start-all.sh`:

```bash
#!/bin/bash

echo "Starting MySQL..."
brew services start mysql

echo "Starting Redis..."
brew services start redis

echo "Starting Backend..."
cd /path/to/EduChain
mvn spring-boot:run -Dspring-boot.run.profiles=dev &

echo "Starting Blockchain Service..."
cd /path/to/EduChain/blockchain-service
python main.py &

echo "Starting Frontend..."
cd /path/to/EduChain/frontend
npm run dev &

echo "All services started!"
echo "Frontend: http://localhost:5173"
echo "Backend: http://localhost:8080/api"
echo "Blockchain: http://localhost:8000"
```

### 8.2 启动顺序

1. MySQL → Redis → 后端 → 区块链服务 → 前端

### 8.3 服务地址汇总

| 服务 | 地址 |
|------|------|
| 前端应用 | http://localhost:5173 |
| 后端API | http://localhost:8080/api |
| Swagger文档 | http://localhost:8080/api/swagger-ui.html |
| 区块链服务 | http://localhost:8000 |
| 区块链文档 | http://localhost:8000/docs |

## 9. 测试账号

### 9.1 默认管理员

```
用户名: admin
密码: admin123
角色: ADMIN
```

### 9.2 测试用户

```
用户名: testuser
密码: test123
角色: LEARNER
```

## 10. 常见问题

### 10.1 端口被占用

```bash
# 查找占用端口的进程
lsof -i:8080

# 终止进程
kill -9 <PID>
```

### 10.2 数据库连接失败

- 检查 MySQL 是否启动
- 检查用户名密码是否正确
- 检查数据库是否存在

### 10.3 Redis 连接失败

- 检查 Redis 是否启动
- 检查端口是否正确 (默认6379)

### 10.4 前端无法访问后端

- 检查后端是否启动
- 检查 CORS 配置
- 检查 API 地址配置

### 10.5 区块链服务启动失败

- 检查 Python 版本
- 检查依赖是否安装完整
- 检查端口 8000 是否被占用

## 11. 开发工具推荐

| 工具 | 用途 |
|------|------|
| IntelliJ IDEA | Java开发 |
| VS Code | 前端开发 |
| PyCharm | Python开发 |
| Navicat | 数据库管理 |
| Postman | API测试 |
| Redis Desktop Manager | Redis管理 |

## 12. 下一步

- 阅读 [系统架构](./系统架构.md) 了解整体设计
- 阅读 [API文档](./API文档.md) 了解接口详情
- 阅读 [部署指南](./部署指南.md) 了解生产部署
